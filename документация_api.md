# Документация по работе с API маркетплейсов

## Общая архитектура

Система интеграции с маркетплейсами построена на следующих принципах:

1. **Клиенты API** - отдельные классы для каждого маркетплейса с методами работы с их API
2. **Сервис синхронизации** - централизованный сервис для управления синхронизацией данных
3. **Хелперы** - вспомогательные функции для преобразования данных
4. **Обработка ошибок** - унифицированная система обработки ошибок и повторных попыток

## Ozon Seller API

### Аутентификация
- Client-Id: Идентификатор клиента
- Api-Key: API ключ

### Реализованные методы
- `getProductList()` - получение списка товаров
- `getProductInfo()` - получение информации о товаре
- `getProductPrices()` - получение цен товаров
- `updateProductPrices()` - обновление цен товаров
- `getProductStocks()` - получение остатков товаров
- `getAnalyticsData()` - получение аналитических данных
- `getSalesReport()` - получение отчета по продажам
- `getOrders()` - получение заказов
- `testConnection()` - тестирование подключения

### Особенности
- Стабильная работа без ограничений
- Хорошая документация
- Высокая скорость ответа

## Яндекс.Маркет Partner API

### Аутентификация
- OAuth токен: Токен авторизации
- Campaign ID: Идентификатор кампании

### Реализованные методы
- `getOffers()` - получение списка товаров
- `getOffer()` - получение информации о конкретном товаре
- `updatePrices()` - обновление цен товаров
- `updateStocks()` - обновление остатков товаров
- `getOrders()` - получение заказов
- `getStats()` - получение статистики
- `getSalesReport()` - получение отчета по продажам
- `getCampaignInfo()` - получение информации о кампании
- `testConnection()` - тестирование подключения

### Особенности
- Требуется Campaign ID для работы
- Хорошая документация
- Стабильная работа

## Wildberries Supplier API

### Аутентификация
- API ключ: Токен авторизации

### Особенности и ограничения
**Важно:** Wildberries активно блокирует автоматизированные запросы!

#### Антибот-защита
1. **Rate limiting** - ограничение количества запросов в единицу времени
2. **IP блокировка** - блокировка IP адресов при подозрительной активности
3. **User-Agent проверка** - проверка заголовков запроса
4. **Поведенческая аналитика** - анализ паттернов запросов

### Гибридный подход для Wildberries

Для работы с Wildberries используется гибридный подход:

1. **Основной метод - Python парсер** (ваш скрипт):
   - Использует реальные User-Agent заголовки
   - Реализует случайные задержки между запросами
   - Обрабатывает robots.txt
   - Парсит данные напрямую с веб-страниц
   - API endpoint: `POST /api/marketplace-accounts/parse`

2. **Fallback метод - Официальный API**:
   - Используется только если Python парсер недоступен
   - Подвержен ограничениям антибот-защиты
   - Медленнее и менее надежен

#### Рекомендации по использованию
1. Использовать Python парсер как основной метод
2. При необходимости использовать прокси для распределения нагрузки
3. Мониторить логи на предмет блокировок
4. Не превышать рекомендованные лимиты запросов
5. Использовать реальные User-Agent заголовки